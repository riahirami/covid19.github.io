<!DOCTYPE html>
<html>
<head>
	  <title>test</title>
	  <meta charset="utf-8">
	   <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>

	  <link rel="stylesheet" type="text/css" href="style.css">
	  
</head>

<body class="bg-secondary">


<div > <!-- test -->
					
					
					<a href=""  data-toggle="modal" data-target="#exampleModal">  <img class="img-rounded img-responsive" src="img/test2.png" style="position: fixed;bottom: 0px;right: 0px;  width: 100px;"></a>
				</div>


							<!-- Modal -->
							<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
							  <div class="modal-dialog" role="document">
							    <div class="modal-content">
							      <div class="modal-header">
							        <h5 class="modal-title" id="exampleModalLabel">Voulez-Vous passer un test ?</h5>
							        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
							          <span aria-hidden="true"></span>
							        </button>
							      </div>
							      <div class="modal-body">
							        			

													<form  id="f1">
													  <div class="form-group">
													    <label for="email">Email address</label>
													    <input type="text" class="form-control"  id="eml" placeholder="name@example.com" >
													    <p class="alert-warning" id="err" style="display: none"> Vous devez saisir un email valide </p>
													  </div>
														
													  	<div class="alert alert-warning text-center">
														  <strong>Merci de cocher les bonnes réponses</strong> 
														</div>
													  <div class="form-group"> <!-- question 1 -->
													    <label for="exampleFormControlTextarea1">Maux de téte ?</label>
													    <div class="form-check form-check-inline">
															  <input class="form-check-input" type="radio" name="q1" id="inlineRadio1" value="oui">
															  <label class="form-check-label" for="inlineRadio1">oui</label>
															</div>
															<div class="form-check form-check-inline">
															  <input class="form-check-input" type="radio" name="q1" id="inlineRadio2" value="non">
															  <label class="form-check-label" for="inlineRadio2">non</label>
															</div>
													  </div>
													  <div class="form-group"> <!-- question 2 -->
													    <label for="exampleFormControlTextarea1">Maux du gorge ou toux sèche ?</label>
													    <div class="form-check form-check-inline">
															  <input class="form-check-input" type="radio" name="q2" id="inlineRadio3" value="oui">
															  <label class="form-check-label" for="inlineRadio3">oui</label>
															</div>
															<div class="form-check form-check-inline">
															  <input class="form-check-input" type="radio" name="q2" id="inlineRadio4" value="non">
															  <label class="form-check-label" for="inlineRadio4">non</label>
															</div>
													  </div>
													  <div class="form-group"> <!-- question 3 -->
													    <label for="exampleFormControlTextarea1">Fiévre ?</label>
													    <div class="form-check form-check-inline">
															  <input class="form-check-input" type="radio" name="q3" id="inlineRadio5" value="oui">
															  <label class="form-check-label" for="inlineRadio5">oui</label>
															</div>
															<div class="form-check form-check-inline">
															  <input class="form-check-input" type="radio" name="q3" id="inlineRadio6" value="non">
															  <label class="form-check-label" for="inlineRadio6">non</label>
															</div>
													  </div>
													  <div class="form-group"> <!-- question 4 -->
													    <label for="exampleFormControlTextarea1">Difficultés respiratoires ?</label>
													    <div class="form-check form-check-inline">
															  <input class="form-check-input" type="radio" name="q4" id="inlineRadio7" value="oui">
															  <label class="form-check-label" for="inlineRadio7">oui</label>
															</div>
															<div class="form-check form-check-inline">
															  <input class="form-check-input" type="radio" name="q4" id="inlineRadio8" value="non">
															  <label class="form-check-label" for="inlineRadio8">non</label>
															</div>
													  </div>


													</form>

													<div class="progress"> <!-- progressbar-->
												  <div id="neg" class="progress-bar bg-success" aria-valuemax="100" style="width:0%">
												    Négative
												  </div>
												  <div id="petre" class="progress-bar bg-warning" aria-valuemax="100" style="width:100%">
												    Peut-étre
												  </div>
												  <div id="pstv" class="progress-bar bg-danger" aria-valuemax="100" style="width:0%">
												    Positive
												  </div>
												</div><!-- progressbar-->

												<span id="resultat" class="alert alert-warning" style="display: none"> Il est recommandé de consulter un médecin</span>

							      </div> <!-- modal-body-->
							      <div class="modal-footer">
							        <button type="reset"  class="btn btn-secondary" data-dismiss="modal">Quitter</button>
							        <button type="reset" id="init" class="btn btn-primary">refaire le test</button>
							      </div>
							    </div>
							  </div>
							</div>

</body>


<script>

					/*function isEmail(email) {
					  var regex = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]$/i;
					  if (regex.test(email)) {
					  	console.log("ismail");
					  } 
					  else
					  	console.log("non");
					}*/
				
			var m= $("#eml").val();
			var regex = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/i;

				$(document).ready(function(){

					$("input[type='radio']").prop("disabled",true);

					$("#eml").keyup(function(){
						
						if (regex.test($("#eml").val())) {
					  	console.log("mail ok");
					  	$("input[name='q1']").prop("disabled",false);
					  	$("#err").css("display","none");

					  } 
					  else
					  	{console.log($("#eml").val());
					  		$("#err").css("display","block");

					  
					  	
					  }
					
				});
				
					

				});
				
				var reponse1 = null;
				var reponse2 = null;
				var reponse3 = null;
				var reponse4 = null;
					$("input[name='q1']").click(function() {
					    reponse1 = this.value;
					    //$(this).prop("disabled", true);
					    $("input[name='q1']").prop("disabled", true);
					    $("input[name='q2']").prop("disabled", false);


					    if (reponse1=='oui'){
					    		$("#neg").css('width','0%');
					    		$("#petre").css('width','+=500');
					    		$("#pstv").css('width','+=500');
					    			console.log("positive= "+$("#pstv").css("width"));
					    console.log("negative= "+$("#neg").css("width"));

					    }
					    else if (reponse1=='non') {
					    		$("#neg").css('width','+=500');
					    	//	$("#petre").css('width','-=100');
					    		$("#pstv").css('width','0%'); 

					    		console.log("positive= "+$("#pstv").css("width"));
					    console.log("negative= "+$("#neg").css("width"));
					    	}

					});

					$("input[name='q2']").click(function() {
					    reponse2 = this.value;
					    $("input[name='q2']").prop("disabled", true);
					    $("input[name='q3']").prop("disabled", false);
					    if (reponse2=='oui' && reponse1=='oui'){

					    		$("#neg").css('width','0');
					    		$("#petre").css('width','+=0');
					    		$("#pstv").css('width','+=100');
					    		
					    		console.log("positive= "+$("#pstv").css("width"));
					    console.log("negative= "+$("#neg").css("width"));
					    

					    }
					    else if (reponse2=='non' && reponse1=='oui') {
					    		$("#neg").css('width','+=100');
					    		$("#petre").css('width','-=100');
					    		$("#pstv").css('width','+=0');

					    		console.log("positive= "+$("#pstv").css("width"));
					    console.log("negative= "+$("#neg").css("width"));
					    	
					    }

					    else if (reponse2=='oui' && reponse1=='non'){
					    		$("#neg").css('width','+=100');
					    		$("#petre").css('width','-=000');
					    		$("#pstv").css('width','+=100');

					    		console.log("positive= "+$("#pstv").css("width"));
					    console.log("negative= "+$("#neg").css("width"));

					    }

					});
					
					$("input[name='q3']").click(function() {
					    reponse3 = this.value;
					     $("input[name='q3']").prop("disabled", true);
					    $("input[name='q4']").prop("disabled", false);
					    
					    if (reponse3=='oui'){

					    		$("#neg").css('width','+=0');
					    		$("#petre").css('width','-=100');
					    		$("#pstv").css('width','+=100');
console.log("positive= "+$("#pstv").css("width"));
					    console.log("negative= "+$("#neg").css("width"));
					    		

					    }
					    else if (reponse3=='non') {
					    		$("#neg").css('width','+=100');
					    		$("#petre").css('width','-=0');
					    		$("#pstv").css('width','-=100');

console.log("positive= "+$("#pstv").css("width"));
					    console.log("negative= "+$("#neg").css("width"));
					    }


					});


					$("input[name='q4']").click(function() {
					    reponse4 = this.value;
					     $("input[name='q4']").prop("disabled", true);
					    
					    console.log("positive= "+$("#pstv").css("width"));
					    console.log("negative= "+$("#neg").css("width"));
					    
					    if (reponse4=='oui'){

					    		$("#neg").css('width','-=100');
					    		$("#petre").css('width','-=0');
					    		$("#pstv").css('width','+=100');

					    		console.log("positive= "+$("#pstv").css("width"));
					    console.log("negative= "+$("#neg").css("width"));

					    }
					    else if (reponse4=='non') {
					    		$("#neg").css('width','+=100');
					    		$("#petre").css('width','+=100');
					    		$("#pstv").css('width','-=100');

					    		console.log("positive= "+$("#pstv").css("width"));
					    console.log("negative= "+$("#neg").css("width"));


					    }
						if ($("#pstv").css("width") > $("#neg").css("width") )
					 {
					 	$("#resultat").css("display","block");
					 }

					});

					 $("#init").click(function () {
					 	$("#eml").val("");
					 	$("input[type=radio]").prop("disabled", true);
					 	$("input[type=radio]").prop("checked", false);
					 	$("#resultat").css("display","none");

					 	$("#neg").css('width','0%');
					    $("#petre").css('width','100%');
					    $("#pstv").css('width','0');
					 })
					 
					 

			
					

					

					

</script>




</html>